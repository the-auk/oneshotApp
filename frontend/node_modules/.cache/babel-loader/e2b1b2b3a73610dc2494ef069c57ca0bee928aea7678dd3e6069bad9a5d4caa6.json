{"ast":null,"code":"import{useState,useEffect}from'react';import styles from\"./display.module.css\";import CompanyItem from'./companyItem';import{getUpdatedCompaniesList}from\"../service/apiClient\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Display(props){const[filters,setFilters]=useState(null);const[companyData,setCompanyData]=useState(null);const[pagination,setPagination]=useState(null);const[currentPage,setCurrentPage]=useState(null);useEffect(()=>{var _props$companyData3,_props$companyData4,_props$companyData4$p;if(props){var _props$companyData,_props$companyData2;setFilters((_props$companyData=props.companyData)===null||_props$companyData===void 0?void 0:_props$companyData.filters);setCompanyData((_props$companyData2=props.companyData)===null||_props$companyData2===void 0?void 0:_props$companyData2.accounts);}setPagination((_props$companyData3=props.companyData)===null||_props$companyData3===void 0?void 0:_props$companyData3.pagination);setCurrentPage((_props$companyData4=props.companyData)===null||_props$companyData4===void 0?void 0:(_props$companyData4$p=_props$companyData4.pagination)===null||_props$companyData4$p===void 0?void 0:_props$companyData4$p.currentPage);},[props]);const handlePageChangeSubmit=async e=>{var _result$data3,_result$data4;e.preventDefault();console.log(\"DISPLAY\",filters);const result=await getUpdatedCompaniesList(filters);if(result.status==200){var _result$data,_result$data2;setFilters((_result$data=result.data)===null||_result$data===void 0?void 0:_result$data.filters);setCompanyData((_result$data2=result.data)===null||_result$data2===void 0?void 0:_result$data2.accounts);}setPagination((_result$data3=result.data)===null||_result$data3===void 0?void 0:_result$data3.pagination);setCurrentPage((_result$data4=result.data)===null||_result$data4===void 0?void 0:_result$data4.pagination.currentPage);};const handleOnPageChange=e=>{setCurrentPage(e.target.value);setFilters(prev=>{return{...prev,'page':e.target.value};});};return/*#__PURE__*/_jsx(\"div\",{className:styles.listWrapper,children:companyData&&/*#__PURE__*/_jsxs(_Fragment,{children:[companyData===null||companyData===void 0?void 0:companyData.map(company=>{return/*#__PURE__*/_jsx(CompanyItem,{data:company});}),/*#__PURE__*/_jsxs(\"div\",{className:styles.paginationFooter,children:[\"Page \",pagination.currentPage,\" / \",pagination.totalPages,/*#__PURE__*/_jsx(\"form\",{onSubmit:handlePageChangeSubmit,children:/*#__PURE__*/_jsx(\"input\",{onChange:handleOnPageChange,value:currentPage})})]})]})});}","map":{"version":3,"names":["useState","useEffect","styles","CompanyItem","getUpdatedCompaniesList","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Display","props","filters","setFilters","companyData","setCompanyData","pagination","setPagination","currentPage","setCurrentPage","_props$companyData3","_props$companyData4","_props$companyData4$p","_props$companyData","_props$companyData2","accounts","handlePageChangeSubmit","e","_result$data3","_result$data4","preventDefault","console","log","result","status","_result$data","_result$data2","data","handleOnPageChange","target","value","prev","className","listWrapper","children","map","company","paginationFooter","totalPages","onSubmit","onChange"],"sources":["/Users/ivar/npm/oneshot/frontend/src/display/display.jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport styles from \"./display.module.css\";\nimport CompanyItem from './companyItem';\nimport { getUpdatedCompaniesList } from \"../service/apiClient\"\n\nexport default function Display(props) {\n    const [filters, setFilters] = useState(null)\n    const [companyData, setCompanyData] = useState(null)\n    const [pagination, setPagination] = useState(null)\n    const [currentPage, setCurrentPage] = useState(null)\n\n    useEffect(() => {\n        if (props) {\n            setFilters(props.companyData?.filters)\n            setCompanyData(props.companyData?.accounts)\n        }\n        setPagination(props.companyData?.pagination)\n        setCurrentPage(props.companyData?.pagination?.currentPage)\n    }, [props])\n\n    const handlePageChangeSubmit = async (e) => {\n        e.preventDefault()\n        console.log(\"DISPLAY\", filters)\n        const result = await getUpdatedCompaniesList(filters)\n        if (result.status == 200) {\n            setFilters(result.data?.filters)\n            setCompanyData(result.data?.accounts)\n        }\n        setPagination(result.data?.pagination)\n        setCurrentPage(result.data?.pagination.currentPage)\n    }\n    const handleOnPageChange = (e) => {\n        setCurrentPage(e.target.value)\n        setFilters((prev) => {\n            return { ...prev, 'page': e.target.value }\n        })\n    }\n    return (\n        <div className={styles.listWrapper}>\n            {companyData && (<>{companyData?.map((company) => {\n                return <CompanyItem data={company} />\n            })}\n                <div className={styles.paginationFooter}>\n                    Page {pagination.currentPage} / {pagination.totalPages}\n                    <form onSubmit={handlePageChangeSubmit}><input onChange={handleOnPageChange} value={currentPage}></input></form>\n                </div>\n            </>)}\n        </div>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}