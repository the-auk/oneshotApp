{"ast":null,"code":"import{getNewCompaniesList}from\"../service/apiClient\";import{useState,useEffect}from\"react\";import ChatMessage from\"./chatMessage\";import styles from\"./chat.module.css\";import{PaperPlaneRight}from'@phosphor-icons/react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Chat(props){const[messageList,setMessageList]=useState([]);const[userInput,setUserInput]=useState('');const[loading,setLoading]=useState(false);const handleUserInput=e=>{setUserInput(e.target.value);};const handleDataFetch=async e=>{e.preventDefault();if(!loading){setMessageList(prev=>{return[...prev,{'role':'user','text':userInput}];});const tempInput=userInput;setUserInput('');setLoading(true);const result=await getNewCompaniesList(tempInput);if(result.status==200){setMessageList(prev=>{return[...prev,{'role':'system','text':\"Here's what I found for \".concat(tempInput)}];});props.passCompanyDataUp(result.data);}else{setMessageList(prev=>{return[...prev,{'role':'system','text':\"\".concat(result.data)}];});}setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:styles.chatBox,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.messageList,children:messageList.length>0&&messageList.map((message,index)=>{return/*#__PURE__*/_jsx(ChatMessage,{message:message.text,role:message.role},index);})}),/*#__PURE__*/_jsxs(\"form\",{action:\"\",className:styles.inputWrapper,children:[/*#__PURE__*/_jsx(\"input\",{className:styles.inputBox,onChange:handleUserInput,value:userInput}),/*#__PURE__*/_jsx(\"button\",{className:styles.submitButton,onClick:handleDataFetch,children:/*#__PURE__*/_jsx(PaperPlaneRight,{size:20})})]})]});}","map":{"version":3,"names":["getNewCompaniesList","useState","useEffect","ChatMessage","styles","PaperPlaneRight","jsx","_jsx","jsxs","_jsxs","Chat","props","messageList","setMessageList","userInput","setUserInput","loading","setLoading","handleUserInput","e","target","value","handleDataFetch","preventDefault","prev","tempInput","result","status","concat","passCompanyDataUp","data","className","chatBox","children","length","map","message","index","text","role","action","inputWrapper","inputBox","onChange","submitButton","onClick","size"],"sources":["/Users/ivar/npm/oneshot/frontend/src/chat/chat.jsx"],"sourcesContent":["import { getNewCompaniesList } from \"../service/apiClient\"\nimport { useState, useEffect } from \"react\";\nimport ChatMessage from \"./chatMessage\";\nimport styles from \"./chat.module.css\";\nimport { PaperPlaneRight } from '@phosphor-icons/react'\n\nexport default function Chat(props) {\n    const [messageList, setMessageList] = useState([])\n    const [userInput, setUserInput] = useState('')\n    const [loading, setLoading] = useState(false);\n\n    const handleUserInput = (e) => {\n        setUserInput(e.target.value)\n    }\n    const handleDataFetch = async (e) => {\n        e.preventDefault();\n        if (!loading) {\n            setMessageList((prev) => {\n                return [...prev, { 'role': 'user', 'text': userInput }]\n            })\n            const tempInput = userInput;\n            setUserInput('')\n            setLoading(true)\n            const result = await getNewCompaniesList(tempInput)\n            if(result.status==200){\n                setMessageList((prev) => {\n                    return [...prev, { 'role': 'system', 'text': `Here's what I found for ${tempInput}` }]\n                })\n                props.passCompanyDataUp(result.data)\n            }\n            else{\n                setMessageList((prev) => {\n                    return [...prev, { 'role': 'system', 'text': `${result.data}` }]\n                })\n            }\n            setLoading(false)\n        }\n    }\n\n    return (\n        <div className={styles.chatBox}>\n            <div className={styles.messageList}>\n                {messageList.length > 0 && messageList.map((message, index) => {\n                    return (<ChatMessage key={index} message={message.text} role={message.role} />)\n                })}\n            </div>\n            <form action='' className={styles.inputWrapper}>\n                <input className={styles.inputBox} onChange={handleUserInput} value={userInput} />\n                <button className={styles.submitButton} onClick={handleDataFetch}>\n                    <PaperPlaneRight size={20} />\n                    </button>\n            </form>\n        </div>\n    )\n}"],"mappings":"AAAA,OAASA,mBAAmB,KAAQ,sBAAsB,CAC1D,OAASC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,MAAO,CAAAC,WAAW,KAAM,eAAe,CACvC,MAAO,CAAAC,MAAM,KAAM,mBAAmB,CACtC,OAASC,eAAe,KAAQ,uBAAuB,QAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEvD,cAAe,SAAS,CAAAC,IAAIA,CAACC,KAAK,CAAE,CAChC,KAAM,CAACC,WAAW,CAAEC,cAAc,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CAClD,KAAM,CAACa,SAAS,CAAEC,YAAY,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAACe,OAAO,CAAEC,UAAU,CAAC,CAAGhB,QAAQ,CAAC,KAAK,CAAC,CAE7C,KAAM,CAAAiB,eAAe,CAAIC,CAAC,EAAK,CAC3BJ,YAAY,CAACI,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAChC,CAAC,CACD,KAAM,CAAAC,eAAe,CAAG,KAAO,CAAAH,CAAC,EAAK,CACjCA,CAAC,CAACI,cAAc,CAAC,CAAC,CAClB,GAAI,CAACP,OAAO,CAAE,CACVH,cAAc,CAAEW,IAAI,EAAK,CACrB,MAAO,CAAC,GAAGA,IAAI,CAAE,CAAE,MAAM,CAAE,MAAM,CAAE,MAAM,CAAEV,SAAU,CAAC,CAAC,CAC3D,CAAC,CAAC,CACF,KAAM,CAAAW,SAAS,CAAGX,SAAS,CAC3BC,YAAY,CAAC,EAAE,CAAC,CAChBE,UAAU,CAAC,IAAI,CAAC,CAChB,KAAM,CAAAS,MAAM,CAAG,KAAM,CAAA1B,mBAAmB,CAACyB,SAAS,CAAC,CACnD,GAAGC,MAAM,CAACC,MAAM,EAAE,GAAG,CAAC,CAClBd,cAAc,CAAEW,IAAI,EAAK,CACrB,MAAO,CAAC,GAAGA,IAAI,CAAE,CAAE,MAAM,CAAE,QAAQ,CAAE,MAAM,4BAAAI,MAAA,CAA6BH,SAAS,CAAG,CAAC,CAAC,CAC1F,CAAC,CAAC,CACFd,KAAK,CAACkB,iBAAiB,CAACH,MAAM,CAACI,IAAI,CAAC,CACxC,CAAC,IACG,CACAjB,cAAc,CAAEW,IAAI,EAAK,CACrB,MAAO,CAAC,GAAGA,IAAI,CAAE,CAAE,MAAM,CAAE,QAAQ,CAAE,MAAM,IAAAI,MAAA,CAAKF,MAAM,CAACI,IAAI,CAAG,CAAC,CAAC,CACpE,CAAC,CAAC,CACN,CACAb,UAAU,CAAC,KAAK,CAAC,CACrB,CACJ,CAAC,CAED,mBACIR,KAAA,QAAKsB,SAAS,CAAE3B,MAAM,CAAC4B,OAAQ,CAAAC,QAAA,eAC3B1B,IAAA,QAAKwB,SAAS,CAAE3B,MAAM,CAACQ,WAAY,CAAAqB,QAAA,CAC9BrB,WAAW,CAACsB,MAAM,CAAG,CAAC,EAAItB,WAAW,CAACuB,GAAG,CAAC,CAACC,OAAO,CAAEC,KAAK,GAAK,CAC3D,mBAAQ9B,IAAA,CAACJ,WAAW,EAAaiC,OAAO,CAAEA,OAAO,CAACE,IAAK,CAACC,IAAI,CAAEH,OAAO,CAACG,IAAK,EAAjDF,KAAmD,CAAC,CAClF,CAAC,CAAC,CACD,CAAC,cACN5B,KAAA,SAAM+B,MAAM,CAAC,EAAE,CAACT,SAAS,CAAE3B,MAAM,CAACqC,YAAa,CAAAR,QAAA,eAC3C1B,IAAA,UAAOwB,SAAS,CAAE3B,MAAM,CAACsC,QAAS,CAACC,QAAQ,CAAEzB,eAAgB,CAACG,KAAK,CAAEP,SAAU,CAAE,CAAC,cAClFP,IAAA,WAAQwB,SAAS,CAAE3B,MAAM,CAACwC,YAAa,CAACC,OAAO,CAAEvB,eAAgB,CAAAW,QAAA,cAC7D1B,IAAA,CAACF,eAAe,EAACyC,IAAI,CAAE,EAAG,CAAE,CAAC,CACrB,CAAC,EACX,CAAC,EACN,CAAC,CAEd"},"metadata":{},"sourceType":"module","externalDependencies":[]}